<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Smart Campus SP - GitOps</title>
<meta name="description" content="    ">


  <meta name="author" content="Jose Castillo Lema">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="GitOps">
<meta property="og:title" content="Smart Campus SP">
<meta property="og:url" content="https://josecastillolema.github.io/smartcampus/">


  <meta property="og:description" content="    ">







  <meta property="article:published_time" content="2014-10-26T00:00:00-02:00">



  <meta property="article:modified_time" content="2014-10-26T18:00:58-02:00">



  

  


<link rel="canonical" href="https://josecastillolema.github.io/smartcampus/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Jose Castillo Lema",
      "url": "https://josecastillolema.github.io/",
      "sameAs": ["https://www.linkedin.com/in/jose-castillo-lema","https://github.com/josecastillolema","https://stackoverflow.com/users/4288758/jos%c3%a9-castillo-lema","https://www.researchgate.net/profile/Jose_Castillo-Lema","https://scholar.google.com.br/citations?user=_xNpHiwAAAAJ","http://lattes.cnpq.br/7955703023492257","https://www.opennetworking.org/ambassadors/jose-castillo-lema/"]
    
  }
</script>


  <meta name="google-site-verification" content="googled48a6d8a28aaa375.html" />





<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="GitOps Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="shortcut icon" type="image/png" href="/assets/images/favicon.ico">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/favicon_io/android-chrome-192x192.png" alt=""></a>
        
        <a class="site-title" href="/">
          GitOps
          
        </a>
        <ul class="visible-links">
<li class="masthead__menu-item">
              <a href="/fiap/">fiap</a>
            </li>
<li class="masthead__menu-item">
              <a href="/mininfv/">mini-nfv</a>
            </li>
<li class="masthead__menu-item">
              <a href="/posts/">posts</a>
            </li>
<li class="masthead__menu-item">
              <a href="/tags/">tags</a>
            </li>
<li class="masthead__menu-item">
              <a href="/about/">about</a>
            </li>
</ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/me.jpg" alt="Jose Castillo Lema" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Jose Castillo Lema</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Cloud consultant @ <strong>RedHat</strong>.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Brazil, SP</span>
        </li>
      

      
        
          
        
          
        
          
        
          
        
          
            <li><a href="https://github.com/josecastillolema" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
        
          
            <li><a href="https://www.linkedin.com/in/jose-castillo-lema" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://stackoverflow.com/users/4288758/jos%c3%a9-castillo-lema" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">StackOverflow</span></a></li>
          
        
          
            <li><a href="https://www.researchgate.net/profile/Jose_Castillo-Lema" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-researchgate" aria-hidden="true"></i><span class="label">ResearchGate</span></a></li>
          
        
          
            <li><a href="https://scholar.google.com.br/citations?user=_xNpHiwAAAAJ" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-google" aria-hidden="true"></i><span class="label">GoogleScholar</span></a></li>
          
        
          
            <li><a href="http://lattes.cnpq.br/7955703023492257" rel="noopener noreferrer" target="_blank"><i class="fas fa-fw fa-university" aria-hidden="true"></i><span class="label">Lattes</span></a></li>
          
        
          
            <li><a href="https://www.opennetworking.org/ambassadors/jose-castillo-lema/" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-battle-net" aria-hidden="true"></i><span class="label">ONF</span></a></li>
          
        
      

      

      
        <li>
          <a href="mailto:josecastillolema@gmail.com">
            <meta itemprop="email" content="josecastillolema@gmail.com">
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Smart Campus SP">
    <meta itemprop="description" content="">
    <meta itemprop="datePublished" content="2014-10-26T00:00:00-02:00">
    <meta itemprop="dateModified" content="2014-10-26T18:00:58-02:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Smart Campus SP
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read

</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title">
<i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu">
  <li><a href="#smart-campus-sp">Smart Campus SP</a></li>
  <li>
<a href="#detailed-description">Detailed description</a>
    <ul>
      <li><a href="#polution-sensors-instrumentation-and-hardware-connection">Polution sensors instrumentation and hardware connection</a></li>
      <li>
<a href="#ngsi-clients">NGSI Clients</a>
        <ul>
          <li>
<a href="#developing-the-ngsi-client">Developing the NGSI Client</a>
            <ul>
              <li><a href="#python-version">Python version</a></li>
              <li><a href="#java-version">Java version</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#the-context-broker">The Context Broker</a></li>
      <li><a href="#wirecloud-management-widget">Wirecloud Management Widget</a></li>
      <li><a href="#connection-to-cosmos-hdfs-and-hive">Connection to Cosmos (HDFS and Hive)</a></li>
      <li><a href="#android-client">Android client</a></li>
    </ul>
  </li>
</ul>

            </nav>
          </aside>
        
        <iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;repo=smartcampus-sp&amp;type=watch&amp;count=true&amp;size=large&amp;v=2" frameborder="0" scrolling="0" width="130" height="30" title="GitHub"></iframe>
<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;repo=smartcampus-sp&amp;type=star&amp;count=true&amp;size=large" frameborder="0" scrolling="0" width="115" height="30" title="GitHub"></iframe>
<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;repo=smartcampus-sp&amp;type=fork&amp;count=true&amp;size=large" frameborder="0" scrolling="0" width="170" height="30" title="GitHub"></iframe>

<p><img src="https://img.shields.io/github/license/josecastillolema/smartcampus-sp" alt="GitHub">
<img src="https://img.shields.io/github/languages/count/josecastillolema/smartcampus-sp" alt="GitHub language count">
<img src="https://img.shields.io/github/languages/top/josecastillolema/smartcampus-sp" alt="GitHub top language">
<a href="https://requires.io/github/josecastillolema/smartcampus-sp/requirements/?branch=master" target="_blank" rel="noopener noreferrer"><img src="https://requires.io/github/josecastillolema/smartcampus-sp/requirements.svg?branch=master" alt="Requirements Status"></a></p>

<h1 id="smart-campus-sp">Smart Campus SP</h1>

<p>SmartCampus is a <a href="https://www.fiware.org/" target="_blank" rel="noopener noreferrer">FI-Ware</a> software prototype to measure the contamination levels in the <a href="https://www5.usp.br/" target="_blank" rel="noopener noreferrer">University of São Paulo (USP)</a> Campus with a group of Android, Arduino and Galileo sensors. Below you can find a diagram of all the system components and a brief explanation of their functions. The following sections will detail how the components were connected and all the software and hardware installed.</p>

<p><img src="https://raw.githubusercontent.com/josecastillolema/smartcampus-sp/master/img/overview.png" alt="FI-Beer overview"></p>

<p>SmartCampus makes use of several FI-Ware building blocks, all of them deployed in the FI-Lab testbed:</p>
<ul>
  <li>
<a href="https://fiware-orion.readthedocs.io/" target="_blank" rel="noopener noreferrer">Context Broker</a>: a data concentrator for all the measures, manages subscriptions and data access. Needs some configuring in order to integrate it with Cosmos through the Cygnus plugin.</li>
  <li>
<a href="https://wirecloud.readthedocs.io/" target="_blank" rel="noopener noreferrer">Wirecloud</a>: Front End based on HTML5+JS widget composing, offers some libraries to integrate with the CB.</li>
  <li>
<a href="https://fiware-cosmos.readthedocs.io/" target="_blank" rel="noopener noreferrer">Cosmos</a>: Big Data platform to store and analyze measure data.</li>
</ul>

<h1 id="detailed-description">Detailed description</h1>

<h2 id="polution-sensors-instrumentation-and-hardware-connection">Polution sensors instrumentation and hardware connection</h2>

<p>In the first iteration of the prototype, the system will only manage one magnitude of the polution metrics: temperature, pressure, noise and air particles.</p>

<h2 id="ngsi-clients">NGSI Clients</h2>

<p>All the heterogeneus sensor reading is send to the Context Broker using the <a href="https://knowage.readthedocs.io/en/6.1.1/user/NGSI/README/index.html" target="_blank" rel="noopener noreferrer">NGSI Protocol</a>.</p>

<h3 id="developing-the-ngsi-client">Developing the NGSI Client</h3>

<p>The Context Broker, where the measures will be aggregated and distributed, listens for requests following the <a href="https://knowage.readthedocs.io/en/6.1.1/user/NGSI/README/index.html" target="_blank" rel="noopener noreferrer">NGSI protocol</a>. In order to communicate with this component, two NGSI clients were developed (python and java). The NGSI protocol defines several resources and operations, but the client only use a very restricted set:</p>

<ul>
  <li>Appending a new measure for a context</li>
  <li>Getting measures for a particular context</li>
</ul>

<p>The NGSI protocol is a REST protocol that accepts both XML and JSON payloads. JSON was prefered for this project.</p>

<h4 id="python-version">Python version</h4>

<p>Intented to be used with Arduino and Galileo sensors. All the communications were stablished using the <code class="highlighter-rouge">requests</code> HTTP library with JSON payloads (the default <code class="highlighter-rouge">json</code> python library).</p>

<h4 id="java-version">Java version</h4>

<p>Intended to be used with Android OS. For the Java version, the <a href="https://jersey.java.net/" target="_blank" rel="noopener noreferrer">Jersey API</a> was used.</p>

<h2 id="the-context-broker">The Context Broker</h2>

<p>The <a href="https://fiware-orion.readthedocs.io/" target="_blank" rel="noopener noreferrer">Orion Context Broker</a> was used as the central data node of the system. All the data of the sensors is sent to Orion who, in turn, send it to all its suscribers and can be queried from the frontend systems to get up-to-date information of any of the measures.</p>

<p>For the prototype, we used a dedicated cloud instance in <a href="https://cloud.lab.fiware.org/" target="_blank" rel="noopener noreferrer">FI-Lab</a>, that has a preinstalled Context Broker service (the image name is <code class="highlighter-rouge">orion-psb-image-R3.2</code>). It should start listening on port 1026. Remember to open this port in the Security Group.</p>

<h2 id="wirecloud-management-widget">Wirecloud Management Widget</h2>
<p>The Front End of the system was designed as a series of widgets deployed in FI-Ware’s Mashup Platform: <a href="https://wirecloud.readthedocs.io/" target="_blank" rel="noopener noreferrer">Wirecloud</a>. The widgets were deployed in the FI-Lab’s marketplace and composed in a new workspace.</p>

<p>Three widgets were deployed:</p>
<ul>
  <li>NGSI Updater</li>
  <li>Map viewer: that consumes data from the Context Broker, showing a map of the campus with realtime information on the temperature, signaling what parts are too cool or too warm.</li>
  <li>Linear graph: Works as a historical data widget, depicting the evolution of the temperature over the last minutes.</li>
</ul>

<p><img src="https://raw.githubusercontent.com/josecastillolema/smartcampus-sp/master/img/wirecloud1.png" alt="WireCloud overview"></p>

<p><img src="https://raw.githubusercontent.com/josecastillolema/smartcampus-sp/master/img/wirecloud2.png" alt="Wiring overview"></p>

<h2 id="connection-to-cosmos-hdfs-and-hive">Connection to Cosmos (HDFS and Hive)</h2>

<p>In order to consume the historical data from the widgets, it has to be first stored somewhere. FI-Ware sensor data is stored in the HDFS system of its Big Data GE: <a href="https://fiware-cosmos.readthedocs.io/" target="_blank" rel="noopener noreferrer">Cosmos</a>. The data is stored in Cosmos through the use of a script in the Context Broker machine (Cygnus), that is subscribed to the measure update.</p>

<h2 id="android-client">Android client</h2>

<p>The Android client was developed in Java. The <a href="https://jersey.java.net/" target="_blank" rel="noopener noreferrer">Jersey API</a> was used for REST and JSON-related tasks.</p>

<p><img src="https://raw.githubusercontent.com/josecastillolema/smartcampus-sp/master/img/android.png" alt="Android client"></p>

<iframe src="https://ghbtns.com/github-btn.html?user=josecastillolema&amp;type=follow&amp;count=true&amp;size=large" frameborder="0" scrolling="0" width="230" height="30" title="GitHub"></iframe>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#en" class="page__taxonomy-item" rel="tag">en</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#fiware" class="page__taxonomy-item" rel="tag">fiware</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#iot" class="page__taxonomy-item" rel="tag">iot</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2014-10-26">October 26, 2014</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/healthcom14/" class="pagination--pager" title="IEEE HealthCom 2014
">Previous</a>
    
    
      <a href="/globecom14/" class="pagination--pager" title="IEEE GLOBECOM 2014
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/haina/" rel="permalink">Huawei ICT Academy
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/aws-academy/" rel="permalink">AWS Academy
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/haina-brazil/" rel="permalink">Huawei Certificate Training Program
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/aodh2sensu/" rel="permalink">Importing alarms from OpenStack Aodh into Sensu Core
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">



</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
<form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term...">
  </form>
  <div id="results" class="results"></div>
</div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
          <li><a href="https://github.com/josecastillolema" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
        
          <li><a href="https://www.linkedin.com/in/jose-castillo-lema" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
          <li><a href="https://stackoverflow.com/users/4288758/jos%c3%a9-castillo-lema" rel="noopener noreferrer" target="_blank"><i class="fab fa-stack-overflow" aria-hidden="true"></i> Stack Overflow</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">© 2020 Jose Castillo Lema. Powered by <a href="https://jekyllrb.com" rel="noopener noreferrer" target="_blank">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="noopener noreferrer" target="_blank">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-169326084-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>









  </body>
</html>
